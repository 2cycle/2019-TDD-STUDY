## TDD Study 1주차

#### 스터디 계획 공유 및 자기소개

```
기간: 5월 11일까지

시간: 매주 토요일 오전 10시부터 3시간 정도

진행방식: 책을 읽은 부분 공유 후 각자 준비해온 발표 진행

이번주: 테스트주도개발 82 page까지 읽어 옴, 성현님이 준비한 StringCalculator를 개발하며 TDD를 경험해봄

```

#### TDD를 왜 배우려 하고, TDD는 무엇인가?

```
1.  TDD를 배우는 이유

- 이전에 공부했던 내용을 정리하기 위함
- 회사에서 도입하기로 하였기 때문
- 현재 회사 내에서 테스트를 작성하고 있으나 부족함을 느꼈기 떄문
- 이직을 준비하기 위함
- 현재 회사 내에서 TDD를 진행하고 있으나 좀 더 제대로 공부하고 싶고 학생들에게 알려주기 위함

2. TDD는 무엇인가?

* TDD = TFD + Refactoring

  즉, 테스트를 우선 작성하는 것만을 의미하지는 않는다. 리팩토링이 수반되어야 하며 이게 핵심이다.
  
  1) 테스트 작성 
  2) 실행가능하게 만듦(컴파일 에러 해결)
  3) 올바르게 작성
  
  원칙 1 - 실패하는 단위 테스트를 작성할 때까지 프로덕션 코드(production code)를 작성하지 않는다.
  원칙 2 - 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
  원칙 3 - 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.
  
  점진적인 리팩토링, 그 과정에서 중복코드가 발생할 수 있다.
  기존의 기능/method의 틀은 해치지 않는 상태에서 점진적으로 리팩토링하자
```

#### TDD를 하는 이유?

```
1. TDD를 해봤다. 하지만 현실은 이렇다.

- 솔직히 무엇을 테스트해야 할지 모르겠다.
- 하다보면 테스트를 다 수정해야 하는 경우가 생기고 이것도 비용이다.
- 관리하던 사람이 소홀하면 어느새 테스트코드는 다 깨져있고 주석처리하게 된다.

2. 원론적인 이유

- 디버깅 시간을 줄여준다.
- 동작하는 문서 역할을 한다.
- 변화에 대한 두려움을 줄여준다.

3. 소회

  그 필요성에 대해 공감하는 팀원들과 함께 일할 수 있다는 것도, 인복이라는 것을 느꼈다.
  그리고 이를 가이드할 수 있는 팀장님과 함께 한다는 것이 굉장히 큰 복이라는 생각이 들었다.
  
4. 1.에 대한 생각

- 처음부터 모든 요구사항을 명세하고 테스트코드를 작성하려 하지말자.
  아는만큼 보이고 프로그래밍할 수 있다. 
  애초에 무엇을 테스트할지 모른다는 것은 무엇을 개발해야 하는지 모른다는 것과 같다.
  우선 구현하려는 기능들에 대해서만 테스트를 작성하여 점진적으로 개발하고 
  추후에 예외처리, 경계값 등이 파악되면 그때 테스트코드를 작성하고 개발하면 된다.
  
  그럼에도 테스트코드 작성이 어려울 때는, Out => In 방식으로 접근하자.
  입력값과 출력값을 우선 예상하고 그 내부의 세세한 구현보다는 전체 구조를 잡는데 집중하자.
  그리고 객체의 상태(속성)보다는 행위에 집중하자.
  
- 급진적인 변경이 이루어졌다는 것 자체가 점진적인 리팩토링을 진행하지 않았다는 반증이다.
  그리고 테스트 코드없이 개발하면서 트러블 슈팅하는 것보다는 비용이 적다고 생각한다.
  무엇보다 그런 큰 변경이 있을 때 테스트없이 배포할 용기가 없다. 
  
- 테스트가 성공해야 merge를 하는 등의 정책이 있어야 하고 이정도 수준의 팀 내 합의는 있어야 한다고 생각한다.
  이것은 TDD와는 별개의 문제라고 생각된다.
```

#### 추가적으로..

```
1. 비즈니스 로직에 대한 단위테스트는 반드시 해야 한다.
   이 때, 비즈니스 로직은 서비스 레이어가 아니라 도메인 레이어에 존재하여야 한다.
   서비스 레이어에 테스트하기는 힘드며 중복이 발생하므로 서비스 레이어에 로직을 구현하지 말자
   <https://sehun-kim.github.io/sehun/tdd/>

2. get을 쓴다면 의심해보자
   객체에 메시지를 보내려고 해보자
   
3. 상속보다는 컴포지션
   Money 객체와 Dollor,Franc 객체는 Is-a로 보인다.
   그러함에도 컴포지션으로 구성해야 하는가?
   이펙티브자바에서는 상속을 할 경우 자식 객체의 캡슐화가 깨질 것을 우려한다.
   순환님과 이야기하다 enum으로 구현하는 것에 대한 논의가 이어졌다.
   times의 경우도 enum method로 구현하기가 용이한 구조라는 생각도 들었다.
   일단 다음 책 범위까지 읽어보자.
```